<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">

<h:head>
	<meta charset="utf-8"/>
	<title>Lista użytkowników</title>
	<h:outputStylesheet name="css/viewstyle.css" library="template" />
</h:head>
<h:body style="background-color: #eee; margin: 0.5em;">
		<div id="container">
		<div id="header">
		<ui:insert name="menu">
			<div id="menu" class="box bottom-space">
				<ui:include src="/templates/menu-snippet-admin.xhtml" />
			</div>
		</ui:insert>
		</div>
		<div id="content">
		<h3>Zarządzanie użytkownikami</h3>
		<center>
		<h:form>
		
		
<div >
        <div >
          
            <p:inputText value="#{userListBB.name}" placeholder="imie i nazwisko" />
           
            <p:commandButton icon="pi pi-search" value="Szukaj" update="form-table" styleClass="white-button"/>  
            
        </div>
    </div>
   
   </h:form>
   </center>

	

	<p:messages />

	<h:form id="form-table" style="margin-bottom:1em;">

		<p:commandButton value="Dodaj nowego admina"
			action="#{userListBB.newUser()}" style="margin-bottom:1em;"/>

		<p:dataTable value="#{userListBB.list}" var="p">

			<p:column priority="5">
				<f:facet name="header">
					<h:outputText value="login" />
				</f:facet>
				<h:outputText value="#{p.login}" />
			</p:column>
			<p:column>
				<f:facet name="header">
					<h:outputText value="imię i nazwisko" />
				</f:facet>
				<h:outputText value="#{p.name}" />
			</p:column>

			<p:column>
				<f:facet name="header">
					<h:outputText value="kraj" />
				</f:facet>
				<h:outputText value="#{p.country}" />
			</p:column>

			<p:column>
				<f:facet name="header">
					<h:outputText value="email" />
				</f:facet>
				<h:outputText value="#{p.email}" />
			</p:column>
			<p:column>
				<f:facet name="header">
					<h:outputText value="telefon" />
				</f:facet>
				<h:outputText value="#{p.mobile}" />
			</p:column>
			<p:column>
				<f:facet name="header">
					<h:outputText value="rola" />
				</f:facet>
				<h:outputText value="#{p.role.name}" />
			</p:column>

			<p:column>
				<f:facet name="header">
					<h:outputText value="opcje" />
				</f:facet>

				<p:commandButton value="Edytuj"
					action="#{userListBB.editUser(p)}" />

				<p:commandButton value="Usuń"
					action="#{userListBB.deleteUser(p)}" update="@form" />

				<p:button outcome="userEditGET" value="Edytuj (GET)">
					<f:param name="p" value="#{p.userId}" />
				</p:button>
			</p:column>

		</p:dataTable>
	</h:form>
	</div>
	<div id="push"></div>
	</div>
	<div id="footer">
		<ui:insert name="footer">
			<div id="footer" class="box bottom-space">
				<ui:include src="/templates/footer-snippet.xhtml" />
			</div>
		</ui:insert>
</div>

</h:body>
</html>